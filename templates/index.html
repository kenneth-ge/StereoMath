<!DOCTYPE HTML>
<html>
    <head>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mathquill/0.10.1/mathquill.css" integrity="sha512-vPg9GqsZZ4LHv9BkFfZSXt7y4D7YaARPU2JFmpZug4EgtJJrumytMAFZkNSk2LSyqWir0TNbh2tBq7UJIMxvlA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathquill/0.10.1/mathquill.min.js" integrity="sha512-Qsh05D07P6dURSZn8Qk+j8GI7cEK0OhXleZvTofmucwoDSkBC0juWf1401JdSE8os2kWEezMu7e9mlnszm3yEw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <link rel="stylesheet" href="{{ url_for('static', filename='toolbar.css') }}" />
    </head>
    <body>
        <form id="myForm">
            <label for="latex">Latex:</label>
            <span id="latex" id="latex" name="latex" required></span>
            <br>
            <label for="output">Output:</label>
            <input type="text" id="output" name="output" required>
            <br>
            <button type="button" onclick="submitForm()">Submit</button>
        </form>
        <table class="toolbar">
            <tr>
                <td>Insert:</td>
                <td class="menu">
                    <p><span class="mathquill-embedded-latex">x^y</span><code>^{}</code></p>
                        <div>
                            <p><span class="mathquill-embedded-latex">x_y</span>
                                <code>_{}</code></p>
                        </div>
                </td>
                <td class="menu">
                    <p><span class="mathquill-embedded-latex">\left(\right)</span><code>\left(\right)</code></p>
                        <div>
                            <p><span class="mathquill-embedded-latex">|</span><span class="box">&nbsp;&nbsp;</span><span class="mathquill-embedded-latex">|</span>
                                <code>\left|\right|</code></p>
                            <p><span class="mathquill-embedded-latex">[</span><span class="box">&nbsp;&nbsp;</span><span class="mathquill-embedded-latex">]</span>
                                <code>\left[\right]</code></p>
                            <p><span>{</span><span class="box">&nbsp;&nbsp;</span><span>}</span>
                                <code>\left\{\right\}</code></p>
                            <p><span class="mathquill-embedded-latex">\lfloor</span><span class="box">&nbsp;&nbsp;</span><span class="mathquill-embedded-latex">\rfloor</span>
                                <code>\lfloor\rfloor</code></p>
                            <p><span class="mathquill-embedded-latex">\lceil</span><span class="box">&nbsp;&nbsp;</span><span class="mathquill-embedded-latex">\rceil</span>
                                <code>\lceil\rceil</code></p>
                        </div>
                </td>
                <td class="button">
                    <p><span class="mathquill-embedded-latex" style="position:relative;top:-.35em">\frac{}{}</span><code>\frac{}{}</code></p>
                </td>
                <td class="menu">
                    <p><span class="mathquill-embedded-latex">\sqrt{}</span><code>\sqrt{}</code></p>
                    <div><p><span class="mathquill-embedded-latex">\sqrt[]{}</span><code>\sqrt[]{}</code></p></div>
                </td>
                <td class="button">
                    <p><span class="mathquill-embedded-latex" style="position:relative;top:-.5em">\binom nk</span><code>\binom nk</code></p>
                </td>
                <td class="menu">
                    <p><span class="mathquill-embedded-latex">\del</span><code>\del</code></p>
                        <div>
                            <p><span class="mathquill-embedded-latex">\part</span><code>\part</code></p>
                        </div>
                </td>
                <td class="menu">
                    <p><span class="mathquill-embedded-latex">\int</span><code>\int</code></p>
                        <div>
                            <p><span class="mathquill-embedded-latex">\sum</span><code>\sum</code></p>
                            <p><span class="mathquill-embedded-latex">\prod</span><code>\prod</code></p>
                            <p><span class="mathquill-embedded-latex">\coprod</span><code>\coprod</code></p>
                            <p><span class="mathquill-embedded-latex">\lim_{x \to 2}</span><code>\lim_{x \to 2}</code></p>
                        </div>
                </td>
                <td class="menu">
                    <p><span class="mathquill-embedded-latex">\div</span><code>\div</code></p>
                        <div>
                            <p><span class="mathquill-embedded-latex">\times</span>
                                <code>\times</code></p>
                            <p><span class="mathquill-embedded-latex">\cdot</span>
                                <code>*</code></p>
                            <p><span class="mathquill-embedded-latex">\pm</span>
                                <code>\pm</code></p>
                            <p><span class="mathquill-embedded-latex">\mp</span>
                                <code>\mp</code></p>
                        </div>
                </td>
                <td class="menu">
                    <p><span class="mathquill-embedded-latex">\ne</span><code>\ne</code></p>
                        <div>
                            <p><span class="mathquill-embedded-latex">\le</span>
                                <code>\le</code></p>
                            <p><span class="mathquill-embedded-latex">\ge</span>
                                <code>\ge</code></p>
                            <p><span class="mathquill-embedded-latex">\asymp</span>
                                <code>\asymp</code></p>
                            <p><span class="mathquill-embedded-latex">\cong</span>
                                <code>\cong</code></p>
                            <p><span class="mathquill-embedded-latex">\equiv</span>
                                <code>\equiv</code></p>
                        </div>
                </td>
                <td class="menu">
                    <p><span class="mathquill-embedded-latex">\pi</span><code>\pi</code></p>
                        <div>
                            <p><span class="mathquill-embedded-latex">\theta</span>
                                <code>\theta</code></p>
                            <p><span class="mathquill-embedded-latex">\infty</span>
                                <code>\infty</code></p>
                            <p><span class="mathquill-embedded-latex">\hbar</span>
                                <code>\hbar</code></p>
                            <p><span class="mathquill-embedded-latex">\deg</span>
                                <code>\deg</code></p>
                                <p><span class="mathquill-embedded-latex">\degree</span>
                                    <code>\degree</code></p>
                            <p><span class="mathquill-embedded-latex">\AA</span>
                                <code>\AA</code></p>
                        </div>
                </td>
                <td class="menu">
                    <p><span class="mathquill-embedded-latex">\sin\left(\right)</span><code>\sin\left(\right)</code></p>
                    <div>
                        <p><span class="mathquill-embedded-latex">\cos\left(\right)</span><code>\cos\left(\right)</code></p>
                        <p><span class="mathquill-embedded-latex">\tan\left(\right)</span><code>\tan\left(\right)</code></p>
                        <p><span class="mathquill-embedded-latex">\arcsin\left(\right)</span><code>\arcsin\left(\right)</code></p>
                        <p><span class="mathquill-embedded-latex">\arccos\left(\right)</span><code>\arccos\left(\right)</code></p>
                        <p><span class="mathquill-embedded-latex">\arctan\left(\right)</span><code>\arctan\left(\right)</code></p>
                    </div>
                </td>
                <td class="menu">
                    <p><span class="mathquill-embedded-latex">\ln\left(\right)</span><code>\ln\left(\right)</code></p>
                    <div>
                        <p><span class="mathquill-embedded-latex">\log\left(\right)</span><code>\log\left(\right)</code></p>
                    </div>
                </td>
            </tr>
        </table>
        <script src="{{ url_for('static', filename='index.js') }}"></script>
        <script>
            var MQ = MathQuill.getInterface(2);
            var answerSpan = document.getElementById('latex');
            var answerMathField = MQ.MathField(answerSpan, {
                handlers: {
                    edit: function() {
                        var enteredMath = answerMathField.latex(); // Get entered math in LaTeX format
                        console.log(enteredMath)
                    }
                }
            });
        </script>
<script type="text/javascript">
    var ed = answerMathField

    var items = document.querySelectorAll('.mathquill-embedded-latex');
    items.forEach(item => {
        MQ.StaticMath(item);
    });

    items = document.querySelectorAll('div');
    items.forEach(item => {
        item.classList.add('hidden');
    });

    $(document).ready(function () {
        $('td').mouseenter(function () {
            //ed.redraw();
        });
        /*setTimeout(function () {
            $('.mathquill-rendered-math').mathquill('redraw');
        }, 1000);*/
    });

    $('.toolbar').click(function (e) {
        var latex = $(e.target).closest('p').children('code').text();
        if (latex){
            console.log(latex)
            ed.write(latex).focus();
        }
    });
</script>
    </body>
</html>